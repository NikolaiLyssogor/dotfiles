eval "$(starship init zsh)"
export EDITOR=nvim

alias icat="chafa"
alias dc='docker compose'
alias ls='ls --color=auto'
alias curc="ssh nily9199@login.rc.colorado.edu"
alias cdmd="cd ~/Library/Mobile\ Documents/iCloud~md~obsidian/Documents/notes"

# Use neovim as man pager
export MANPAGER='nvim +Man!'

export PATH="/opt/homebrew/opt/postgresql@16/bin:$PATH"
export PATH="/Users/nqxl/Library/Python3.9/bin:$PATH"
export JAVA_HOME=$(/usr/libexec/java_home)

bindkey -v

# Make backspace always delete previous char in insert mode
bindkey -M viins '^?' backward-delete-char   # DEL (most terminals)
bindkey -M viins '^H' backward-delete-char   # BS (some terminals)

# Yank to the system clipboard
function vi-yank-xclip {
    zle vi-yank
   echo "$CUTBUFFER" | pbcopy -i
}

zle -N vi-yank-xclip
bindkey -M vicmd 'y' vi-yank-xclip

# for pipx
export PATH="$PATH:/Users/nlyssogor/.local/bin"

# docker completions
fpath=($HOME/.docker/completions $fpath)
fpath=($HOME/.config/lockey/completions $fpath)
autoload -U compinit
compinit

# specify dir for python cache
export PYTHONPYCACHEPREFIX="$HOME/.cache/pycache/"

# fzf config
source <(fzf --zsh)
export FZF_ALT_C_COMMAND="fd --type d --no-ignore-vcs --exclude __pycache__ --exclude target --exclude node_modules --exclude .git . $HOME/Documents/"

# Configure zsh history
SAVEHIST=9000
HISTSIZE=9999
setopt INC_APPEND_HISTORY # do not wait for shell to exit to append history
setopt HIST_SAVE_NO_DUPS # do not save duplicate of prior command
setopt HIST_SAVE_NO_DUPS # omit older duplicates of newer ones

# Always use block cursor on command line
echo -ne '\e[2 q'

function set_block_cursor {
  echo -ne '\e[2 q'
}

function zle-keymap-select {
  set_block_cursor
}
zle -N zle-keymap-select

function zle-line-init zle-line-finish {
  set_block_cursor
}
zle -N zle-line-init
zle -N zle-line-finish
